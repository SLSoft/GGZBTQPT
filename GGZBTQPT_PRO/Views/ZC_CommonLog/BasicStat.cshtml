@model IEnumerable<GGZBTQPT_PRO.Models.T_ZC_CommonLog>
@using GGZBTQPT_PRO.Enums
@{
    Layout = null;
}
<div style="height: 400px;">
    <div class="stat-summary">
        会员管理系统总共的操作日志条数： @Model.Count()
    </div>
    <div style="float: left; display: block; overflow: auto; width: 240px; height: 300px; line-height: 21px; background: #fff">
        <h3>
            按照操作类型统计如下：</h3>
        <ul>
            <li>访问操作： @Model.Where(m => m.OperateType == (int)OperateTypes.Visit).Count()</li>
            <li>添加操作： @Model.Where(m => m.OperateType == (int)OperateTypes.Create).Count()</li>
            <li>删除操作： @Model.Where(m => m.OperateType == (int)OperateTypes.Delete).Count()</li>
            <li>更新操作： @Model.Where(m => m.OperateType == (int)OperateTypes.Edit).Count()</li>
            <li>发布操作： @Model.Where(m => m.OperateType == (int)OperateTypes.Publish).Count()</li>
            <li>关注操作： @Model.Where(m => m.OperateType == (int)OperateTypes.Attention).Count()</li>
            <li>收藏操作： @Model.Where(m => m.OperateType == (int)OperateTypes.Favorite).Count()</li>
            <li>搜索操作：@Model.Where(m => m.OperateType == (int)OperateTypes.Search).Count()</li>
        </ul>
    </div>
    <div class="unitBox" style="margin-left: 246px;">
        <div id="basic_stat" style="height: 400px; width: 600px;">
        </div>
    </div>
</div>
<script src="@Url.Content("~/Public/jqPlot/plugins/jqplot.pieRenderer.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Public/jqPlot/plugins/jqplot.donutRenderer.min.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $.getJSON("@Url.Action("BasicStatData", "ZC_CommonLog")", function(data){
        
            var statData = [];
            $.each(data.statData, function(key, value){
                var _temp = [key, value];
                statData.push(_temp);
            }); 
            
            jQuery.jqplot('basic_stat', [statData],
                {
                    seriesDefaults: {
                        // Make this a pie chart.
                        renderer: jQuery.jqplot.PieRenderer,
                        rendererOptions: {
                            // Put data labels on the pie slices.
                            // By default, labels show the percentage of the slice.
                            showDataLabels: true
                            }
                        },
                    legend: { show: true, location: 'e' }
                }
            );
        });
    });
</script>
