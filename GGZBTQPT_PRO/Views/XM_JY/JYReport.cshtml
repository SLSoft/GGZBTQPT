@model IEnumerable<GGZBTQPT_PRO.ViewModels.VM_JYReport>
@{
    Layout = null;
}
<link href="@Url.Content("~/Content/css/Style.css")" rel="stylesheet" type="text/css" />
<div style="margin:10px 10px;" class="pageContent" layouth="30">
<h2>项目交易统计</h2>
<hr />
<p style="font-size:14pt; margin-left:30px">年度项目交易总量：@ViewBag.JYCount</p>
<p style="font-size:14pt; margin-left:30px">年度项目交易总额：@ViewBag.JYSum 万元</p>
<br />
<div style="width:200px; float:left">
<table cellpadding="5" cellspacing="5" class="report_tb">
    <tr>
        <td>月份</td>
        <td>交易数量</td>
        <td>交易总额</td>
    </tr>
    @foreach (var item in Model)
    { 
        <tr>
            <td>@item.TypeName</td>
            <td>@item.Count</td>
            <td>@item.Sum</td>
        </tr>
    }
</table>
</div>
<div id="jychart" style="height: 560px; width: 600px; float:left"></div>

</div>
<script src="@Url.Content("~/Public/jqPlot/plugins/jqplot.barRenderer.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Public/jqPlot/plugins/jqplot.categoryAxisRenderer.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Public/jqPlot/plugins/jqplot.pointLabels.min.js")" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $.getJSON("@Url.Action("JYReportData", "XM_JY")", function(data){
        
            var statData = [];
            var ticks = [];
            $.each(data.statData, function(key, value){
                statData.push(value);
                ticks.push(key);
            }); 

            
            var plot1b = $.jqplot('jychart', [statData], 
             {
                    seriesDefaults: {
                        renderer:$.jqplot.BarRenderer,
                        rendererOptions: {
                            fillToZero: true,        
                            barDirection: 'horizontal', // vertical or horizontal.
                            barWidth: 15     // width of the bars.  null to calculate automatically.
                            }
                    },
                    axes: {
                        xaxis: {
                            tickOptions: { formatString: '%.1f' }
                        },
                        yaxis: {
                            renderer: $.jqplot.CategoryAxisRenderer,
                            ticks: ticks
                        }
                    }
                });

        });
    });
</script>