@model IEnumerable<GGZBTQPT_PRO.Models.T_HY_Member>
@using GGZBTQPT_PRO.Enums
@{
    Layout = null;
}
<style type="text/css">

    .stat-ul li{ padding-top:5px; padding-left:130px;}
</style>

<div class="stat-container" style="margin:10px;" >
    <div class="stat-summary" style="font-weight:bold; padding-bottom:5px;">
        会员总个数： @Model.Count() (个)
    </div>
    <div class="stat-number">
        <h3>
            按照会员类别统计如下：
        </h3>
        <ul class ="stat-ul">
            <li>个人： @Model.Where(m => m.Type == (int)MemberTypes.个人).Count() (个)</li>
            <li>企业： @Model.Where(m => m.Type == (int)MemberTypes.企业).Count() (个)</li>
            <li>机构： @Model.Where(m => m.Type == (int)MemberTypes.机构).Count() (个)</li>
        </ul>
    </div>
    <div class="unitBox" style="margin-left: 246px;">
        <div id="member_stat" style="height: 390px; width: 600px;">
        </div>
    </div>
</div>

<script src="@Url.Content("~/Public/jqPlot/plugins/jqplot.pieRenderer.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Public/jqPlot/plugins/jqplot.donutRenderer.min.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $.getJSON("@Url.Action("MemberStatData", "HY_Member")", function(data){
            var statData = [];
            $.each(data.statData, function(key, value){
                var _temp = [key, value];
                statData.push(_temp);
            }); 
            
            jQuery.jqplot('member_stat', [statData],
                {
                    title: '会员类别统计图表',
                    seriesColors: [ "#74A474", "#EED205", "#00CCFF"],
                    seriesDefaults: {
                        renderer: jQuery.jqplot.PieRenderer,
                        rendererOptions: {
                            showDataLabels: true
                            }
                        },
                    legend: { show: true, location: 'ne' }
                }
            );
        });
    });
</script>